(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),s=a.n(c),l=a(2),u=a.n(l),o=a(3),i=a(1),m=(a(13),a(4)),p=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(u.a.mark((function e(){var t,a,n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([p("https://jsonplaceholder.typicode.com/posts"),p("https://jsonplaceholder.typicode.com/users"),p("https://jsonplaceholder.typicode.com/comments")]);case 2:return t=e.sent,a=Object(i.a)(t,3),n=a[0],r=a[1],c=a[2],s=n.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{user:r.find((function(t){return t.id===e.userId})),comments:c.filter((function(t){return t.postId===e.id}))})})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(e){var t=e.name,a=e.email;return r.a.createElement("div",{className:"author"},r.a.createElement("div",{className:"author_name"},r.a.createElement("p",null,t),r.a.createElement("p",null,r.a.createElement("a",{className:"author_email",href:"mailto:".concat(a)},a))))},E=function(e){var t=e.name,a=e.email,n=e.body;return r.a.createElement("li",{className:"guest"},r.a.createElement("p",{className:"guest_name"},t),r.a.createElement("p",null,n),r.a.createElement("p",null,r.a.createElement("a",{className:"guest_email",href:"mailto:".concat(a)},a)))},b=function(e){var t=e.comments;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(E,Object.assign({},e,{key:e.id}))})))},h=function(e){var t=e.post,a=Object(n.useState)(!1),c=Object(i.a)(a,2),s=c[0],l=c[1];return r.a.createElement("li",{className:"post"},r.a.createElement("div",{className:"post_body"},r.a.createElement("div",null,r.a.createElement("div",{className:"avatar"}),r.a.createElement("h3",{className:"post_title"},t.title),r.a.createElement("p",{className:"post_text"},t.body)),r.a.createElement(d,t.user)),r.a.createElement("div",{className:"toggle-comments"},r.a.createElement("label",{htmlFor:"checkbox"},r.a.createElement("i",{className:"toggle-checkbox material-icons"},"arrow_drop_down"),r.a.createElement("input",{id:"checkbox",className:"checkbox",type:"checkbox",checked:s,onChange:function(){return l(!s)}}))),s&&r.a.createElement(b,{comments:t.comments}))},v=function(e){var t=e.handleChangeInput,a=e.inputValue;return r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons"},"search"),r.a.createElement("input",{type:"text",value:a,onChange:function(e){return t(e)},required:!0}))};var j=function(e){var t=e.posts,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],l=c[1],u=Object(n.useState)(t),o=Object(i.a)(u,2),m=o[0],p=o[1],f=function(e,t){var a=Object(n.useState)(e),r=Object(i.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){s(e)}),t);return function(){clearTimeout(a)}}),[e]),c}(s,1e3);return Object(n.useEffect)((function(){if(f){var e=function(e){var a=new RegExp(e,"i");return t.filter((function(e){return a.test(e.title)||a.test(e.body)}))}(f);p(e)}else p(t)}),[f.length]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search_block"},r.a.createElement(v,{handleChangeInput:function(e){var t=e.target.value;l(t)},inputValue:s}),r.a.createElement("div",{className:"posts_count"},m.length," ","post(s) are found")),r.a.createElement("ul",null,m.map((function(e){return r.a.createElement(h,{post:e,key:e.id})}))))},g=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(i.a)(s,2),m=l[0],p=l[1],d=Object(n.useState)(""),E=Object(i.a)(d,2),b=E[0],h=E[1],v=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,f();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h("Loading error");case 11:p(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"app"},a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{posts:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"load_button",type:"button",onClick:v},m?"Loading...":"Load"),r.a.createElement("div",{className:"error"},b)))};s.a.render(r.a.createElement(g,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.67986950.chunk.js.map